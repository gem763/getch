{% extends "getchapp/layout.html" %}

{% block css %}
  {{ block.super }}
  <style>
    :root {
      --tagger-imgsize: 40px;
      --rainbow: linear-gradient(
        to right,
        #E7484F,
        #E7484F 16.65%,
        #F68B1D 16.65%,
        #F68B1D 33.3%,
        #FCED00 33.3%,
        #FCED00 49.95%,
        #009E4F 49.95%,
        #009E4F 66.6%,
        #00AAC3 66.6%,
        #00AAC3 83.25%,
        #732982 83.25%,
        #732982 100%,
        #E7484F 100%
      );
    }

    input[type='checkbox'] {
      display: none;
      visibility: hidden;
    }
  </style>
{% endblock css %}


{% block mastbody %}

{% if chtype == 'user' %}
  {% include 'getchapp/user.html' with user=ch.master %}

{% else %}
  {% include 'getchapp/pix.html' with ch=ch %}
  {% include 'getchapp/tagfeeds.html' with ch=ch without_pix=True %}

{% endif %}
{% endblock mastbody %}


{% block js %}
  {{ block.super }}
  <script>
    $('#publisher .ui.search').search({
      source: {{ brands | safe }},
      fullTextSearch: true,
      showNoResults: false,
      maxResults: 5,
      minCharacters: 1,
      searchFields: ['name', 'category', 'keywords'],
      templates: {
        standard: function(response){
          htmls = $.map(response.results, function(brand) {
                    var avatar = 'https://storage.googleapis.com/getch-storage/' + brand.avatar__src.replace('\\', '/');
                    var onclick = "set_brand(" + brand.pk + ", '" + avatar + "')";
                    var html = '<div class="result" onclick="' + onclick + '">';
                    html += '<div class="image">'
                          + '<img src="' + avatar + '">'
                          + '</div>';
                    html += '<div class="content">';
                    html += '<div class="ui header">' + brand.fullname_en;
                    html += '<div class="sub header">' + brand.fullname_kr + '</div>';
                    html += '</div></div>';
                    html += '</div>';
                    return html
                  });

          return htmls
        },
      },
    });
  </script>
{% endblock js %}
